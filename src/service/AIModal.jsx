// const {
//     GoogleGenerativeAI,
//     HarmCategory,
//     HarmBlockThreshold,
//   } = require("@google/generative-ai");
//   const fs = require("node:fs");
//   const mime = require("mime-types");

import { GoogleGenerativeAI } from "@google/generative-ai";


const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseModalities: [
  ],
  responseMimeType: "application/json",
};


export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        { text: "Generate Travel Plan for Location: Las Vegas, for 5 Days for Couple with a Cheap budget, Give me a Hotels options list with\n\nHotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 5 or more days with each day plan with best time to visit in JSON format" },
      ],
    },
    {
      role: "model",
      parts: [
        { text: "Okay, here's a Las Vegas itinerary geared toward a couple on a budget for 3 days, complete with hotel options and details in JSON format.\n\n```json\n{\n  \"LasVegasBudgetTrip\": {\n    \"TripDuration\": \"3 Days\",\n    \"Travelers\": \"Couple\",\n    \"Budget\": \"Cheap\",\n    \"Currency\": \"USD\",\n    \"Accommodation\": {\n      \"HotelOptions\": [\n        {\n          \"HotelName\": \"Circus Circus Hotel & Casino\",\n          \"HotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n          \"Price\": {\n            \"AverageNightly\": 45,\n            \"Range\": \"40-60\"\n          },\n          \"HotelImageUrl\": \"https://media-cdn.tripadvisor.com/media/photo-s/1b/44/06/18/circus-circus-hotel-casino.jpg\",\n          \"GeoCoordinates\": {\n            \"Latitude\": 36.1291,\n            \"Longitude\": -115.1675\n          },\n          \"Rating\": 3.5,\n          \"Description\": \"A classic Vegas hotel with a circus theme.  Offers affordable rooms and free circus acts.  Located on the north end of the Strip, so be prepared to walk or use transportation to get to other attractions.  Features Adventuredome indoor theme park (additional cost).\"\n        },\n        {\n          \"HotelName\": \"Excalibur Hotel & Casino\",\n          \"HotelAddress\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109\",\n          \"Price\": {\n            \"AverageNightly\": 55,\n            \"Range\": \"50-70\"\n          },\n          \"HotelImageUrl\": \"https://media-cdn.tripadvisor.com/media/photo-s/1b/4e/1d/1a/excalibur-hotel-casino.jpg\",\n          \"GeoCoordinates\": {\n            \"Latitude\": 36.0946,\n            \"Longitude\": -115.1742\n          },\n          \"Rating\": 4.0,\n          \"Description\": \"A medieval-themed hotel at the south end of the Strip.  Good value for its location.  Connected to Luxor and Mandalay Bay by walkways and tram. Offers multiple dining options and a lively casino.\"\n        },\n         {\n          \"HotelName\": \"Luxor Hotel & Casino\",\n          \"HotelAddress\": \"3900 S Las Vegas Blvd, Las Vegas, NV 89119\",\n          \"Price\": {\n            \"AverageNightly\": 65,\n            \"Range\": \"60-80\"\n          },\n          \"HotelImageUrl\": \"https://media-cdn.tripadvisor.com/media/photo-s/1b/52/22/2c/luxor-hotel-casino.jpg\",\n          \"GeoCoordinates\": {\n            \"Latitude\": 36.0956,\n            \"Longitude\": -115.1757\n          },\n          \"Rating\": 4.0,\n          \"Description\": \"An Egyptian-themed hotel with a distinctive pyramid shape.  Offers unique rooms and exhibits.  Connected to Excalibur and Mandalay Bay.  Home to various shows and attractions.\"\n        },\n        {\n          \"HotelName\": \"LINQ Hotel + Experience\",\n          \"HotelAddress\": \"3535 S Las Vegas Blvd, Las Vegas, NV 89109\",\n          \"Price\": {\n            \"AverageNightly\": 75,\n            \"Range\": \"70-90\"\n          },\n          \"HotelImageUrl\": \"https://media-cdn.tripadvisor.com/media/photo-s/1b/3f/a7/32/linq-hotel-experience.jpg\",\n          \"GeoCoordinates\": {\n            \"Latitude\": 36.1161,\n            \"Longitude\": -115.1694\n          },\n          \"Rating\": 4.2,\n          \"Description\": \"Modern hotel located in the heart of the Strip, adjacent to the LINQ Promenade and High Roller Observation Wheel.  Rooms are smaller but stylish.  Offers a lively atmosphere and easy access to dining and entertainment.\"\n        }\n      ]\n    },\n    \"Itinerary\": {\n      \"Day1\": {\n        \"Theme\": \"Exploring the Strip (South End)\",\n        \"BestTimeToVisit\": \"Late Morning - Evening\",\n        \"Places\": [\n          {\n            \"PlaceName\": \"Welcome to Fabulous Las Vegas Sign\",\n            \"PlaceDetails\": \"Iconic photo opportunity. Can be very crowded during peak hours. Free.\",\n            \"PlaceImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Welcome_to_Las_Vegas_sign.JPG/1280px-Welcome_to_Las_Vegas_sign.JPG\",\n            \"GeoCoordinates\": {\n              \"Latitude\": 36.0828,\n              \"Longitude\": -115.1731\n            },\n            \"TicketPricing\": 0,\n            \"Rating\": 4.5,\n            \"TravelTimeFromHotel\": \"15-20 minutes by car/bus from Circus Circus; 5-10 minutes walk from Excalibur/Luxor.\"\n          },\n          {\n            \"PlaceName\": \"Luxor Hotel & Casino\",\n            \"PlaceDetails\": \"Visit the impressive Egyptian-themed hotel, walk around, and check out the interior.  Consider visiting the Titanic: The Artifact Exhibition (ticket required).\",\n            \"PlaceImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c4/Luxor_Las_Vegas_Nevada_IMG_6737.JPG/1280px-Luxor_Las_Vegas_Nevada_IMG_6737.JPG\",\n            \"GeoCoordinates\": {\n              \"Latitude\": 36.0956,\n              \"Longitude\": -115.1757\n            },\n            \"TicketPricing\": \"Free to enter; Exhibits priced separately (~$30)\",\n            \"Rating\": 4.0,\n            \"TravelTimeFromHotel\": \"Adjacent to Excalibur. 10-15 minutes by car/bus from Circus Circus.\"\n          },\n          {\n            \"PlaceName\": \"Excalibur Hotel & Casino\",\n            \"PlaceDetails\": \"Explore the medieval-themed hotel.  Catch a free show or try your luck at the casino.\",\n            \"PlaceImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/3/33/Excalibur_hotel_and_casino_view_from_south.jpg/1280px-Excalibur_hotel_and_casino_view_from_south.jpg\",\n            \"GeoCoordinates\": {\n              \"Latitude\": 36.0946,\n              \"Longitude\": -115.1742\n            },\n            \"TicketPricing\": \"Free to enter; Shows priced separately.\",\n            \"Rating\": 3.8,\n            \"TravelTimeFromHotel\": \"Adjacent to Luxor. 10-15 minutes by car/bus from Circus Circus.\"\n          },\n          {\n            \"PlaceName\": \"Mandalay Bay Resort and Casino\",\n            \"PlaceDetails\": \"Visit the Shark Reef Aquarium (ticket required) or explore the hotel's restaurants and shops.\",\n            \"PlaceImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/8/85/Mandalay_Bay_Resort_and_Casino_Las_Vegas.jpg/1280px-Mandalay_Bay_Resort_and_Casino_Las_Vegas.jpg\",\n            \"GeoCoordinates\": {\n              \"Latitude\": 36.0904,\n              \"Longitude\": -115.1759\n            },\n            \"TicketPricing\": \"Free to enter; Shark Reef Aquarium ~$29.\",\n            \"Rating\": 4.2,\n            \"TravelTimeFromHotel\": \"5-10 minutes walk from Excalibur/Luxor. 15-20 minutes by car/bus from Circus Circus.\"\n          },\n             {\n            \"PlaceName\": \"High Roller Observation Wheel\",\n            \"PlaceDetails\": \"Ride the High Roller for panoramic views of the Las Vegas Strip. Consider going at night for the best experience. Book tickets in advance to save time and money.\",\n            \"PlaceImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/2/28/High_Roller_Las_Vegas_June_2014_crop.jpg/1280px-High_Roller_Las_Vegas_June_2014_crop.jpg\",\n            \"GeoCoordinates\": {\n              \"Latitude\": 36.1159,\n              \"Longitude\": -115.1693\n            },\n            \"TicketPricing\": \"Approximately $25-$37 depending on the time of day and day of the week.\",\n            \"Rating\": 4.5,\n            \"TravelTimeFromHotel\": \"30-40 minutes by bus from Excalibur or Luxor; 10-15 minutes walk from The LINQ Hotel.\"\n          }\n\n        ]\n      },\n      \"Day2\": {\n        \"Theme\": \"Downtown Las Vegas (Fremont Street Experience)\",\n        \"BestTimeToVisit\": \"Evening/Night\",\n        \"Places\": [\n          {\n            \"PlaceName\": \"Fremont Street Experience\",\n            \"PlaceDetails\": \"A pedestrian mall featuring a giant LED canopy with light shows and live music. Free to enter. Experience the Viva Vision light show.\",\n            \"PlaceImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b9/Fremont_Street_Experience_at_night.jpg/1280px-Fremont_Street_Experience_at_night.jpg\",\n            \"GeoCoordinates\": {\n              \"Latitude\": 36.1701,\n              \"Longitude\": -115.1421\n            },\n            \"TicketPricing\": 0,\n            \"Rating\": 4.6,\n            \"TravelTimeFromHotel\": \"20-30 minutes by car/bus from the Strip hotels.\"\n          },\n          {\n            \"PlaceName\": \"SlotZilla Zip Line\",\n            \"PlaceDetails\": \"A thrilling zipline experience over Fremont Street. Tickets required.\",\n            \"PlaceImageUrl\": \"https://www.vegasexperience.com/wp-content/uploads/2018/07/vegas-experience-slotzilla-hero.jpg\",\n            \"GeoCoordinates\": {\n              \"Latitude\": 36.1701,\n              \"Longitude\": -115.1421\n            },\n            \"TicketPricing\": \" ~$39-$59.\",\n            \"Rating\": 4.3,\n            \"TravelTimeFromHotel\": \"Located on Fremont Street\"\n          },\n          {\n            \"PlaceName\": \"The Neon Museum\",\n            \"PlaceDetails\": \"An outdoor museum showcasing vintage Las Vegas signs. Guided tours available (ticket required). Book in advance.\",\n            \"PlaceImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/d/df/Neon_Museum_sign_at_night.jpg/1280px-Neon_Museum_sign_at_night.jpg\",\n            \"GeoCoordinates\": {\n              \"Latitude\": 36.1632,\n              \"Longitude\": -115.1474\n            },\n            \"TicketPricing\": \"~$30.\",\n            \"Rating\": 4.7,\n            \"TravelTimeFromHotel\": \"5-10 minutes walk from Fremont Street.\"\n          },\n               {\n            \"PlaceName\": \"Pawn Stars Shop\",\n            \"PlaceDetails\": \"Visit the famous pawn shop from the TV show 'Pawn Stars.'\",\n            \"PlaceImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a6/Gold_%26_Silver_Pawn_Shop_2011.JPG/1280px-Gold_%26_Silver_Pawn_Shop_2011.JPG\",\n            \"GeoCoordinates\": {\n              \"Latitude\": 36.1645,\n              \"Longitude\": -115.1517\n            },\n            \"TicketPricing\": \"Free to enter, but be prepared for crowds.\",\n            \"Rating\": 3.8,\n            \"TravelTimeFromHotel\": \"5-10 minutes walk from Fremont Street.\"\n          }\n        ]\n      },\n      \"Day3\": {\n        \"Theme\": \"Central Strip & Budget-Friendly Activities\",\n        \"BestTimeToVisit\": \"Morning - Afternoon\",\n        \"Places\": [\n          {\n            \"PlaceName\": \"Bellagio Conservatory & Botanical Garden\",\n            \"PlaceDetails\": \"A stunning display of floral arrangements that changes seasonally. Free.\",\n            \"PlaceImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/0/03/Bellagio_conservatory_fall_2018.jpg/1280px-Bellagio_conservatory_fall_2018.jpg\",\n            \"GeoCoordinates\": {\n              \"Latitude\": 36.1127,\n              \"Longitude\": -115.1742\n            },\n            \"TicketPricing\": 0,\n            \"Rating\": 4.8,\n            \"TravelTimeFromHotel\": \"20-30 minutes by bus from Circus Circus; 15-20 minutes by bus from Excalibur/Luxor; 5-10 minutes walk from LINQ.\"\n          },\n          {\n            \"PlaceName\": \"Bellagio Fountains\",\n            \"PlaceDetails\": \"A spectacular water show set to music. Free. Check the schedule for show times.\",\n            \"PlaceImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/76/Bellagio_fountains_at_night.jpg/1280px-Bellagio_fountains_at_night.jpg\",\n            \"GeoCoordinates\": {\n              \"Latitude\": 36.1127,\n              \"Longitude\": -115.1742\n            },\n            \"TicketPricing\": 0,\n            \"Rating\": 4.9,\n            \"TravelTimeFromHotel\": \"Located outside the Bellagio.\"\n          },\n          {\n            \"PlaceName\": \"Walk the Strip and Window Shop\",\n            \"PlaceDetails\": \"Enjoy the sights and sounds of the Strip. Window shop at the high-end stores and people-watch.\",\n            \"PlaceImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3c/The_Strip_in_Las_Vegas_at_night.jpg/1280px-The_Strip_in_Las_Vegas_at_night.jpg\",\n            \"GeoCoordinates\": {\n              \"Latitude\": 36.1146,\n              \"Longitude\": -115.1728\n            },\n            \"TicketPricing\": 0,\n            \"Rating\": 4.5,\n            \"TravelTimeFromHotel\": \"Everywhere\"\n          },\n          {\n            \"PlaceName\": \"Mirage Volcano\",\n            \"PlaceDetails\": \"A free volcano eruption show outside the Mirage Hotel. Check the schedule for show times.\",\n            \"PlaceImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/b/bf/Mirage_volcano_night.jpg/1280px-Mirage_volcano_night.jpg\",\n            \"GeoCoordinates\": {\n              \"Latitude\": 36.1212,\n              \"Longitude\": -115.1752\n            },\n            \"TicketPricing\": 0,\n            \"Rating\": 4.6,\n            \"TravelTimeFromHotel\": \"Located outside the Mirage Hotel.  10-15 minutes walk north from Bellagio.\"\n          },\n          {\n            \"PlaceName\": \"LINQ Promenade\",\n            \"PlaceDetails\": \"Outdoor shopping, dining, and entertainment district. Stroll through and enjoy the atmosphere.\",\n            \"PlaceImageUrl\": \"https://media.cntraveler.com/photos/5d9a446103a82b0008b5c080/16:9/w_2560%2Cc_limit/LINQ-Promenade_Las-Vegas_GettyImages-462159574.jpg\",\n            \"GeoCoordinates\": {\n              \"Latitude\": 36.1163,\n              \"Longitude\": -115.1697\n            },\n            \"TicketPricing\": 0,\n            \"Rating\": 4.3,\n            \"TravelTimeFromHotel\": \"Adjacent to LINQ Hotel; 15-20 minutes by bus from Excalibur/Luxor; 30-40 minutes by bus from Circus Circus.\"\n          }\n        ]\n      }\n    },\n    \"TransportationTips\": [\n      \"Utilize the Las Vegas Monorail (if staying near a station) or the Deuce bus for transportation on the Strip.\",\n      \"Walking is a good option, but distances can be long, especially in the heat.\",\n      \"Consider ride-sharing services (Uber/Lyft) for shorter trips, but be aware of surge pricing.\"\n    ],\n    \"BudgetSavingTips\": [\n      \"Take advantage of free attractions (fountains, gardens, light shows).\",\n      \"Look for happy hour deals and affordable dining options (food courts, fast food).\",\n      \"Purchase drinks at a drugstore or grocery store instead of bars.\",\n      \"Take advantage of free transportation options like the tram between Excalibur, Luxor, and Mandalay Bay.\",\n      \"Consider bringing your own snacks and drinks to avoid expensive purchases on the Strip.\"\n    ]\n  }\n}\n```\n\n**Key Considerations for Budget Travel in Las Vegas:**\n\n*   **Timing:** Traveling during the off-season (summer heat or weekdays) can result in significant savings on hotel rates.\n*   **Transportation:** Walking is free, but distances are long. The Deuce bus is a cost-effective way to travel the Strip.\n*   **Food:** Look for budget-friendly dining options like food courts, buffets (lunch is cheaper), and happy hour deals.\n*   **Attractions:** Prioritize free attractions and shows. Consider purchasing tickets in advance for discounted rates on paid attractions.\n\n**Important Notes:**\n\n*   Prices are estimates and can vary based on the time of year, day of the week, and availability. Always check current pricing before booking.\n*   Hotel ratings are based on general reviews and may vary.\n*   Travel times are approximate and can be affected by traffic.\n*   Show schedules are subject to change. Check the official websites for the latest information.\n*   Always be mindful of your belongings and surroundings, especially in crowded areas.\n\nThis JSON provides a solid framework. Remember to tailor it to your specific interests and preferences to create your perfect budget-friendly Las Vegas adventure!\n" },
      ],
    },
  ],
});

